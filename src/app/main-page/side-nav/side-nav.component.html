<div class="channelHeader">
  <div class="serverName"></div>
  <img (click)="newMessage()" class="edit" src="./assets/img/icons/edit.svg" alt="" />
</div>
<div class="sidenav-content">
  <div class="menuChannelDropdown">
    <div (click)="openMenuChannelDropdown()" class="opend dropdown" *ngIf="menuChannelIsDropedDown"></div>
    <div (click)="openMenuChannelDropdown()" class="closed dropdown" *ngIf="!menuChannelIsDropedDown"></div>

    <table>
      <div class="channels ml40" [hidden]="!menuChannelIsDropedDown">
        <tr class="channel-tr" *ngFor="let channel of publicChannels"
          (click)="showChannel(channel); setSelectedMessage()">
          <span class="channelName"></span>
          {{ channel.name }}
        </tr>
        <div class="addNewChannel" (click)="addNewChannel()"></div>
      </div>
    </table>
  </div>

  <div class="directMessages">
    <div (click)="openDirectMessagesDropdown()" class="directMessagesOpend dropdown" *ngIf="directMessagesIsDropedDown"></div>
    <div (click)="openDirectMessagesDropdown()" class="directMessagesClose dropdown" *ngIf="!directMessagesIsDropedDown"></div>

    <table>
      <div class="channels" [hidden]="!directMessagesIsDropedDown">
        <tr class="message-tr" *ngFor="let user of workspaceUsers"
            (click)="findOrCreatePrivateChannelWithUser(user); setSelectedMessage()">

          <!-- Placeholder spinner while image is loading -->
          <mat-spinner *ngIf="!user.isImageLoaded" diameter="30"></mat-spinner>

          <!-- Profile Image with load event -->
          <img *ngIf="user.avatar" class="table-profile-img"
               [src]="user.avatar" alt="profile image"
               (load)="onImageLoad(user.userId)"
               (error)="onImageError(user.userId)"
               [style.display]="user.isImageLoaded ? 'block' : 'none'" />

          <!-- Status icons -->
          <img *ngIf="user.status === 'online'" src="./assets/img/online.png" alt="" class="online" />
          <img *ngIf="user.status !== 'online'" src="./assets/img/offline.png" alt="" class="online" />

          <!-- Mark the current user with (Du) -->
          <ng-container *ngIf="user.userId === currentUser.userId">{{ user.name }} (Du)</ng-container>
          <ng-container *ngIf="user.userId !== currentUser.userId">{{ user.name }}</ng-container>

        </tr>
      </div>
    </table>
  </div>
